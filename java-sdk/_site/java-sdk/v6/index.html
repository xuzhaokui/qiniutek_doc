<!DOCTYPE html>
<html>
	<head>
		<meta name="robots" content="all" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="description" content="七牛云存储API和SDK文档" />
		<meta name="keywords" content="七牛, 七牛云存储, 七牛云存储API, 七牛云存储SDK, qrsync, qboxrsctl, QinuRS, S3" />
		<meta name="author" content="qiniu.com" />
		<meta name="copyright" content="qiniu.com" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Language" content="zh-cn" />
		<meta http-equiv="imagetoolbar" content="false" />
		<meta name="MSSmartTagsPreventParsing" content="true" />
		<title>Java SDK | 七牛云存储</title>
		<link rel="shortcut icon" href="/favicon.ico" type="image/gif" />
		<link href="/static/css/reset.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/960.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/uv_active4d.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
	</head>
	<body class="api">
		<div id="header-wrapper">
			<div id="header">
				<div>
					<a class="logo" href="/">七牛云存储</a>
					<ul class="nav">
						<li><a href="https://portal.qiniu.com">开发者平台</a></li>
						<li><a href="http://www.qiniu.com">七牛官网</a></li>
						<!-- <li><a href="/faq/FAQ.html">FAQ</a></li> -->
					</ul>
				</div>
			</div><!-- #header -->
		</div><!-- #header-wrapper -->

		<div id="wrapper">
			<div class="content">	
				<h1>Java SDK<span id="version">v6</span></h1>
				<article>
				<p>此SDK适用于Java 6及以上版本。基于 <a href="http://docs.qiniu.com">七牛云存储官方API</a> 构建。使用此 SDK 构建您的网络应用程序，能让您以非常便捷地方式将数据安全地存储到七牛云存储上。无论您的网络应用是一个网站程序，还是包括从云端（服务端程序）到终端（手持设备应用）的架构的服务或应用，通过七牛云存储及其 SDK，都能让您应用程序的终端用户高速上传和下载，同时也让您的服务端更加轻盈。</p>

<p>SDK下载地址：<a href="https://github.com/qiniu/java-sdk/tags">https://github.com/qiniu/java-sdk/tags</a></p>

<h2>目录</h2>

<ul>
<li><a href="#env_preparation">环境准备</a></li>
<li><a href="#setup">初始化</a>

<ul>
<li><a href="#setup-key">配置密钥</a></li>
</ul></li>
<li><a href="#get-and-put-api">上传下载接口</a>

<ul>
<li><a href="#io-put-flow">上传流程</a></li>
<li><a href="#make-uptoken">生成上传授权uptoken</a></li>
<li><a href="#upload-code">上传代码</a></li>
<li><a href="#resumable-io-put">断点续上传、分块并行上传</a></li>
<li><a href="#io-put-policy">上传策略</a></li>
<li><a href="#public-download">公有资源下载</a></li>
<li><a href="#private-download">私有资源下载</a></li>
</ul></li>
<li><a href="#rs-api">资源管理接口</a>

<ul>
<li><a href="#rs-stat">查看单个文件属性信息</a></li>
<li><a href="#rs-copy">复制单个文件</a></li>
<li><a href="#rs-move">移动单个文件</a></li>
<li><a href="#rs-delete">删除单个文件</a></li>
<li><a href="#batch">批量操作</a>

<ul>
<li><a href="#batch-stat">批量获取文件属性信息</a></li>
<li><a href="#batch-copy">批量复制文件</a></li>
<li><a href="#batch-move">批量移动文件</a></li>
<li><a href="#batch-delete">批量删除文件</a></li>
</ul></li>
</ul></li>
<li><a href="#fop-api">数据处理接口</a>

<ul>
<li><a href="#fop-image">图像</a>

<ul>
<li><a href="#fop-image-info">查看图像属性</a></li>
<li><a href="#fop-exif">查看图片EXIF信息</a></li>
<li><a href="#fop-image-view">生成图片预览</a></li>
</ul></li>
</ul></li>
<li><a href="#rsf-api">高级资源管理接口</a>

<ul>
<li><a href="#rsf-listPrefix">批量获得文件列表</a></li>
</ul></li>
<li><a href="#contribution">贡献代码</a></li>
<li><a href="#license">许可证</a></li>
</ul>

<hr />

<p><a name="env_preparation"></a></p>

<h2>1. 环境准备</h2>

<p>安装 Maven 的插件：<a href="http://www.eclipse.org/m2e/">The Maven Integration for Eclipse</a></p>

<p>添加依赖</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.qiniu&lt;/groupId&gt;
    &lt;artifactId&gt;sdk&lt;/artifactId&gt;
    &lt;version&gt;6.0.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p><a name="setup"></a></p>

<h2>2.初始化</h2>

<p><a name="setup-key"></a></p>

<h3>2.1 配置密钥</h3>

<p>要接入七牛云存储，您需要拥有一对有效的 Access Key 和 Secret Key 用来进行签名认证。可以通过如下步骤获得：</p>

<ol>
<li><a href="https://dev.qiniutek.com/signup">开通七牛开发者帐号</a></li>
<li><a href="https://dev.qiniutek.com/account/keys">登录七牛开发者自助平台，查看 Access Key 和 Secret Key</a> 。</li>
</ol>

<p>在获取到 Access Key 和 Secret Key 之后，您可以按照如下方式进行密钥配置：</p>

<pre><code class="java">import com.qiniu.api.config.Config;

public class Init {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
    }
}
</code></pre>

<p><a name="get-and-put-api"></a></p>

<h2>3. 上传下载接口</h2>

<p>为了尽可能地改善终端用户的上传体验，七牛云存储首创了客户端直传功能。</p>

<p>一般云存储的上传流程是：</p>

<pre><code>客户端（终端用户） =&gt; 业务服务器 =&gt; 云存储服务
</code></pre>

<p>这样通过用户自己的业务服务器中转上传至云存储服务端。这种方式存在一些不足：</p>

<ol>
<li>多了一次中转的上传过程，同数据存放在用户的业务服务器中相比，会相对慢一些；</li>
<li>增加了用户业务服务器的负载，消耗了带宽，占用了磁盘，降低了服务能力；</li>
<li>增加了用户的流量消耗，来自终端用户的上传数据进入业务服务器，然后再次上传至云存储服务，净增一倍流量。</li>
</ol>

<p>因此，七牛云存储引入了客户端直传的模式，将整个上传过程调整为：</p>

<pre><code>客户端（终端用户） =&gt; 七牛 =&gt; 业务服务器
</code></pre>

<p>客户端（终端用户）直接上传到七牛的服务器。通过DNS智能解析，七牛会选择到离终端用户最近的ISP服务商节点，速度会相比数据存放在用户自己的业务服务器上的方式更快。而且，七牛云存储可以在用户文件上传成功以后，替用户的客户端向用户的业务服务器发送反馈信息，减少用户的客户端同业务服务器之间的交互。详情请参考<a href="#io-put-policy">上传策略</a></p>

<p><strong>注意</strong>：如果您只是想要将您电脑上，或者是服务器上的文件上传到七牛云存储，可以直接使用七牛提供的 <a href="http://docs.qiniu.com/tools/qrsync.html">qrsync</a> 上传工具，而无需额外开发。</p>

<p>文件上传有两种方式：普通方式，即一次性上传整个文件；断点续上传，即将文件分割成若干小块，分别上传，然后在七牛云存储服务端重新合并成一个文件。一般情况下，用户可以采用普通上传。如果文件较大，或者网络条件不佳，那么可以使用断点续上传，提高上传的速度和成功率。</p>

<p><a name="io-put-flow"></a></p>

<h3>3.1 上传流程</h3>

<p>在七牛云存储中，整个上传流程大体分为这样几步：</p>

<ol>
<li>业务服务器颁发 <a href="#make-uptoken">uptoken（上传授权凭证）</a>给客户端（终端用户）</li>
<li>客户端凭借 <a href="#make-uptoken">uptoken</a> 上传文件到七牛</li>

<li><p>在七牛获得完整数据后，根据用户请求的设定执行以下操作：</p>

<p>a. 如果用户设定了<a href="#io-put-policy">returnUrl</a>，七牛云存储将反馈一个指向returnUrl的HTTP 301，驱动客户端执行跳转；</p>

<p>b. 如果用户设定了<a href="#io-put-policy">callbackUrl</a>，七牛云存储将向callbackUrl指定的地址发起一个HTTP 请求回调业务服务器，同时向业务服务器发送数据。发送的数据内容由<a href="#io-put-policy">callbackBody</a>指定。业务服务器完成回调的处理后，可以在HTTP Response中放入数据，七牛云存储会响应客户端，并将业务服务器反馈的数据发送给客户端；</p>

<p>c. 如果两者都没有设置，七牛云存储根据<a href="#io-put-policy">returnBody</a>的设定向客户端发送反馈信息。</p></li>
</ol>

<p>需要注意的是，回调到业务服务器的过程是可选的，它取决于业务服务器颁发的 <a href="#make-uptoken">uptoken</a>。如果没有回调，七牛会返回一些标准的信息（比如文件的 hash）给客户端。如果上传发生在业务服务器，以上流程可以自然简化为：</p>

<ol>
<li>业务服务器生成 uptoken（不设置回调，自己回调到自己这里没有意义）</li>
<li>凭借 <a href="#make-uptoken">uptoken</a> 上传文件到七牛</li>
<li>善后工作，比如保存相关的一些信息</li>
</ol>

<p><a name="make-uptoken"></a></p>

<h3>3.2 生成上传授权uptoken</h3>

<p>uptoken是一个字符串，作为http协议Header的一部分（Authorization字段）发送到我们七牛的服务端，表示这个http请求是经过用户授权的。</p>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.PutPolicy;

public class Uptoken {

    public static void main(String[] args) throws Exception {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        // 请确保该bucket已经存在
        String bucketName = &quot;Your bucket name&quot;;
        PutPolicy putPolicy = new PutPolicy(bucketName);
        String uptoken = putPolicy.token(mac);
    }
}

</code></pre>

<p><a name="upload-code"></a></p>

<h3>3.3 上传代码</h3>

<p>上传本地文件。如果用户从自己的计算机或服务器上传文件，可以直接使用七牛云存储提供的<a href="http://docs.qiniu.com/tools/qrsync.html">qrsync</a>工具。用户也可以自行编写上传程序。</p>

<p>上传程序大体步骤如下：</p>

<ol>
<li>设置AccessKey和SecretKey；</li>
<li>创建Mac对象；</li>
<li>创建PutPolicy对象；</li>
<li>生成UploadToken；</li>
<li>创建PutExtra对象；</li>
<li>调用put或putFile方法上传文件；</li>
</ol>

<p>具体代码如下：</p>

<pre><code class="java">import java.io.File;

import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.io.IoApi;
import com.qiniu.api.io.PutExtra;
import com.qiniu.api.io.PutRet;
import com.qiniu.api.rs.PutPolicy;

public class UploadFile {
    
    public static void main(String[] args) throws Exception {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        // 请确保该bucket已经存在
        String bucketName = &quot;&lt;Your bucket name&gt;&quot;;
        PutPolicy putPolicy = new PutPolicy(bucketName);
        String uptoken = putPolicy.token(mac);
        PutExtra extra = new PutExtra();
        String key = &quot;&lt;key&gt;&quot;;
        File file = new File(&quot;&lt;your local file path&gt;&quot;);
        PutRet ret = IoApi.put(uptoken, key, file, extra);
    }
}

</code></pre>

<p><a name="resumable-io-put"></a></p>

<h3>3.4 断点续上传、分块并行上传</h3>

<p>建设中&hellip;</p>

<p><a name="io-put-policy"></a></p>

<h3>3.5 上传策略</h3>

<p><a href="http://docs.qiniu.com/api/put.html#uploadToken">uptoken</a> 实际上是用 AccessKey/SecretKey 进行数字签名的上传策略(<code>rs.PutPolicy</code>)，它控制则整个上传流程的行为。让我们快速过一遍你都能够决策啥：</p>

<ul>
<li><code>expires</code> 指定 <a href="http://docs.qiniu.com/api/put.html#uploadToken">uptoken</a> 有效期（默认1小时）。一个 <a href="http://docs.qiniu.com/api/put.html#uploadToken">uptoken</a> 可以被用于多次上传（只要它还没有过期）。</li>
<li><code>scope</code> 限定客户端的权限。如果 <code>scope</code> 是 bucket，则客户端只能新增文件到指定的 bucket，不能修改文件。如果 <code>scope</code> 为 bucket:key，则客户端可以修改指定的文件。</li>
<li><code>callbackUrl</code> 设定业务服务器的回调地址，这样业务服务器才能感知到上传行为的发生。可选。</li>
<li><code>asyncOps</code> 可指定上传完成后，需要自动执行哪些数据处理。这是因为有些数据处理操作（比如音视频转码）比较慢，如果不进行预转可能第一次访问的时候效果不理想，预转可以很大程度改善这一点。</li>
<li><code>returnBody</code> 可调整返回给客户端的数据包（默认情况下七牛返回文件内容的 <code>hash</code>，也就是下载该文件时的 <code>etag</code>）。这只在没有 <code>CallbackUrl</code> 时有效。</li>
<li><code>escape</code> 为真（非0）时，表示客户端传入的 <code>callbackParams</code> 中含有转义符。通过这个特性，可以很方便地把上传文件的某些元信息如 <code>fsize</code>（文件大小）、<code>ImageInfo.width/height</code>（图片宽度/高度）、<code>exif</code>（图片EXIF信息）等传给业务服务器。</li>
<li><code>detectMime</code> 为真（非0）时，表示服务端忽略客户端传入的 <code>mimeType</code>，自己自行检测。</li>
</ul>

<p>关于上传策略更完整的说明，请参考 <a href="http://docs.qiniu.com/api/put.html#uploadToken">uptoken</a>。</p>

<h3>3.6 文件下载</h3>

<p>七牛云存储上的资源下载分为 公有资源下载 和 私有资源下载 。</p>

<p>私有（private）是 Bucket（空间）的一个属性，一个私有 Bucket 中的资源为私有资源，私有资源不可匿名下载。</p>

<p>新创建的空间（Bucket）缺省为私有，也可以将某个 Bucket 设为公有，公有 Bucket 中的资源为公有资源，公有资源可以匿名下载。</p>

<p><a name="public-download"></a></p>

<h3>3.7 公有资源下载</h3>

<p>如果在给bucket绑定了域名的话，可以通过以下地址访问。</p>

<pre><code>[GET] http://&lt;domain&gt;/&lt;key&gt;
</code></pre>

<p>其中<domain>可以到<a href="https://dev.qiniutek.com/buckets">七牛云存储开发者自助网站</a>绑定, 域名可以使用自己一级域名的或者是由七牛提供的二级域名(<code>&lt;bucket&gt;.qiniutek.com</code>)。注意，尖括号不是必需，代表替换项。</p>

<p><a name="private-download"></a></p>

<h3>3.8 私有资源下载</h3>

<p>私有资源必须通过临时下载授权凭证(downloadToken)下载，如下：</p>

<pre><code>[GET] http://&lt;domain&gt;/&lt;key&gt;?token=&lt;downloadToken&gt;
</code></pre>

<p>注意，尖括号不是必需，代表替换项。</p>

<p><code>downloadToken</code> 可以使用 SDK 提供的如下方法生成：</p>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.GetPolicy;
import com.qiniu.api.rs.URLUtils;

public class DownloadFile {

    public static void main(String[] args) throws Exception {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        String baseUrl = URLUtils.makeBaseUrl(&quot;&lt;domain&gt;&quot;, &quot;&lt;key&gt;&quot;);
        GetPolicy getPolicy = new GetPolicy();
        String downloadUrl = getPolicy.makeRequest(baseUrl, mac);
    }
}
</code></pre>

<p><a name="rs-api"></a></p>

<h2>4. 资源管理接口</h2>

<p>文件管理包括对存储在七牛云存储上的文件进行查看、复制、移动和删除处理。</p>

<p><a name="rs-stat"></a></p>

<h3>4.1 查看单个文件属性信息</h3>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.Entry;
import com.qiniu.api.rs.RSClient;

public class Stat {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient client = new RSClient(mac);
        Entry statRet = client.stat(&quot;&lt;bucketName&gt;&quot;, &quot;&lt;key&gt;&quot;);
    }
}
</code></pre>

<p><a name="rs-copy"></a></p>

<h3>4.2 复制单个文件</h3>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.RSClient;

public class Copy {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient client = new RSClient(mac);
        client.copy(&quot;&lt;bucketSrc&gt;&quot;, &quot;&lt;keySrc&gt;&quot;, &quot;&lt;bucketDest&gt;&quot;, &quot;&lt;keyDest&gt;&quot;);
    }
}
</code></pre>

<p><a name="rs-move"></a></p>

<h3>4.3 移动单个文件</h3>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.RSClient;

public class Move {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient client = new RSClient(mac);
        client.move(&quot;&lt;bucketSrc&gt;&quot;, &quot;&lt;keySrc&gt;&quot;, &quot;&lt;bucketDest&gt;&quot;, &quot;&lt;keyDest&gt;&quot;);
    }
}

</code></pre>

<p><a name="rs-delete"></a></p>

<h3>4.4 删除单个文件</h3>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.RSClient;

public class Delete {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient client = new RSClient(mac);
        client.delete(&quot;&lt;bucketName&gt;&quot;, &quot;&lt;key&gt;&quot;);
    }
}

</code></pre>

<p><a name="batch"></a></p>

<h3>4.5 批量操作</h3>

<p>当您需要一次性进行多个操作时, 可以使用批量操作.</p>

<p><a name="batch-stat"></a></p>

<h4>4.5.1 批量获取文件属性信息</h4>

<pre><code class="java">
import java.util.ArrayList;
import java.util.List;

import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.BatchStatRet;
import com.qiniu.api.rs.EntryPath;
import com.qiniu.api.rs.RSClient;

public class BatchStat {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        
        RSClient rs = new RSClient(mac);
        List&lt;EntryPath&gt; entries = new ArrayList&lt;EntryPath&gt;();

        EntryPath e1 = new EntryPath();
        e1.bucket = &quot;&lt;bucketName&gt;&quot;;
        e1.key = &quot;&lt;key1&gt;&quot;;
        entries.add(e1);

        EntryPath e2 = new EntryPath();
        e2.bucket = &quot;&lt;bucketName&gt;&quot;;
        e2.key = &quot;&lt;key2&gt;&quot;;
        entries.add(e2);

        BatchStatRet bsRet = rs.batchStat(entries);
    }
}
</code></pre>

<p><a name="batch-copy"></a></p>

<h4>4.5.2 批量复制文件</h4>

<pre><code class="java">
import java.util.ArrayList;
import java.util.List;

import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.BatchCallRet;
import com.qiniu.api.rs.EntryPath;
import com.qiniu.api.rs.EntryPathPair;
import com.qiniu.api.rs.RSClient;

public class BatchCopy {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient rs = new RSClient(mac);
        List&lt;EntryPathPair&gt; entries = new ArrayList&lt;EntryPathPair&gt;();

        EntryPathPair pair1 = new EntryPathPair();

        EntryPath src = new EntryPath();
        src.bucket = &quot;&lt;srcBucket&gt;&quot;;
        src.key = &quot;&lt;key1&gt;&quot;;

        EntryPath dest = new EntryPath();
        dest.bucket = &quot;&lt;destBucket&gt;&quot;;
        dest.key = &quot;&lt;key1&gt;&quot;;

        pair1.src = src;
        pair1.dest = dest;

        EntryPathPair pair2 = new EntryPathPair();

        EntryPath src2 = new EntryPath();
        src2.bucket = &quot;&lt;srcBucket&gt;&quot;;
        src2.key = &quot;&lt;key2&gt;&quot;;

        EntryPath dest2 = new EntryPath();
        dest2.bucket = &quot;&lt;destBucket&gt;&quot;;
        dest2.key = &quot;&lt;key2&gt;&quot;;

        pair2.src = src2;
        pair2.dest = dest2;

        entries.add(pair1);
        entries.add(pair2);

        BatchCallRet ret = rs.batchCopy(entries);
    }
}
</code></pre>

<p><a name="batch-move"></a></p>

<h4>4.5.3 批量移动文件</h4>

<pre><code class="java">
import java.util.ArrayList;
import java.util.List;

import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.BatchCallRet;
import com.qiniu.api.rs.EntryPath;
import com.qiniu.api.rs.EntryPathPair;
import com.qiniu.api.rs.RSClient;

public class BatchMove {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient rs = new RSClient(mac);
        List&lt;EntryPathPair&gt; entries = new ArrayList&lt;EntryPathPair&gt;();
        
        EntryPathPair pair1 = new EntryPathPair();
        
        EntryPath src = new EntryPath();
        src.bucket = &quot;&lt;srcBucket&gt;&quot;;
        src.key = &quot;&lt;key1&gt;&quot;;
        
        EntryPath dest = new EntryPath();
        dest.bucket = &quot;&lt;destBucket&gt;&quot;;
        dest.key = &quot;&lt;key1&gt;&quot;;
        
        pair1.src = src;
        pair1.dest = dest;
        
        EntryPathPair pair2 = new EntryPathPair();
        
        EntryPath src2 = new EntryPath();
        src2.bucket = &quot;&lt;srcBucket&gt;&quot;;
        src2.key =  &quot;&lt;key2&gt;&quot;;
        
        EntryPath dest2 = new EntryPath();
        dest2.bucket = &quot;&lt;destBucket&gt;&quot;;
        dest2.key = &quot;&lt;key2&gt;&quot;;
        
        pair2.src = src2;
        pair2.dest = dest2;
        
        entries.add(pair1);
        entries.add(pair2);
        
        BatchCallRet ret = rs.batchMove(entries);
    }
}   
</code></pre>

<p><a name="batch-delete"></a></p>

<h4>4.5.4 批量删除文件</h4>

<pre><code class="java">import java.util.ArrayList;
import java.util.List;

import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rs.BatchCallRet;
import com.qiniu.api.rs.EntryPath;
import com.qiniu.api.rs.RSClient;

public class BatchDelete {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSClient rs = new RSClient(mac);
        List&lt;EntryPath&gt; entries = new ArrayList&lt;EntryPath&gt;();

        EntryPath e1 = new EntryPath();
        e1.bucket = &quot;&lt;bucketName&gt;&quot;;
        e1.key = &quot;&lt;key1&gt;&quot;;
        entries.add(e1);

        EntryPath e2 = new EntryPath();
        e2.bucket = &quot;&lt;bucketName&gt;&quot;;
        e2.key = &quot;&lt;key2&gt;&quot;;
        entries.add(e2);

        BatchCallRet bret = rs.batchDelete(entries);
    }
}

</code></pre>

<p>参阅: <code>rs.EntryPath</code>, <code>rs.Client.BatchDelete</code></p>

<p><a name="batch-advanced"></a></p>

<h4>4.5.5 高级批量操作</h4>

<p>批量操作不仅仅支持同时进行多个相同类型的操作, 同时也支持不同的操作.</p>

<pre><code class="java">to do!
</code></pre>

<p><a name="fop-api"></a></p>

<h2>5. 数据处理接口</h2>

<p>七牛支持在云端对图像, 视频, 音频等富媒体进行个性化处理</p>

<p><a name="fop-image"></a></p>

<h3>5.1 图像</h3>

<p><a name="fop-image-info"></a></p>

<h3>5.1.1 查看图像属性</h3>

<pre><code class="java">import com.qiniu.api.fop.ImageInfo;
import com.qiniu.api.fop.ImageInfoRet;

public class FopImageInfo {

    public static void main(String[] args) {
        String url = &quot;&lt;domain&gt;&quot; + &quot;/&quot; + &quot;&lt;key&gt;&quot;;
        ImageInfoRet ret = ImageInfo.call(url);
    }
}
</code></pre>

<p>参阅: <code>fop.ImageInfoRet</code>, <code>fop.ImageInfo</code></p>

<p><a name="fop-exif"></a></p>

<h3>5.1.2 查看图片EXIF信息</h3>

<pre><code class="java">import com.qiniu.api.fop.ExifRet;
import com.qiniu.api.fop.ImageExif;

public class FopImageExif {

    public static void main(String[] args) {
        String url = &quot;&lt;domain&gt;&quot; + &quot;/&quot; + &quot;&lt;key&gt;&quot;;
        ExifRet ret = ImageExif.call(url);
    }
}
</code></pre>

<p><a name="fop-image-view"></a></p>

<h3>5.1.3 生成图片预览</h3>

<pre><code class="java">import com.qiniu.api.fop.ImageView;
import com.qiniu.api.net.CallRet;

public class FopImageView {

    public static void main(String[] args) {
        String url = &quot;http://domain/key&quot;;
        ImageView iv = new ImageView();
        iv.mode = 1 ;
        iv.width = 100 ;
        iv.height = 200 ;
        iv.quality = 1 ;
        iv.format = &quot;jpg&quot; ;
        CallRet ret = iv.call(url);
    }
}
</code></pre>

<p><a name="rsf-api"></a></p>

<h2>6. 高级资源管理接口(rsf)</h2>

<p><a name="rsf-listPrefix"></a></p>

<p>批量获取文件列表</p>

<pre><code class="java">import com.qiniu.api.auth.digest.Mac;
import com.qiniu.api.config.Config;
import com.qiniu.api.rsf.RSFClient;

public class ListPrefix {

    public static void main(String[] args) {
        Config.ACCESS_KEY = &quot;&lt;YOUR APP ACCESS_KEY&gt;&quot;;
        Config.SECRET_KEY = &quot;&lt;YOUR APP SECRET_KEY&gt;&quot;;
        Mac mac = new Mac(Config.ACCESS_KEY, Config.SECRET_KEY);
        RSFClient client = new RSFClient(mac);
        client.listPrifix(&quot;&lt;bucketName&gt;&quot;, &quot;&lt;prefix&gt;&quot;, &quot;&lt;marker&gt;&quot;, 10);
    }
}
</code></pre>

<p><a name="contribution"></a></p>

<h2>7. 贡献代码</h2>

<ol>
<li>Fork</li>
<li>创建您的特性分支 (<code>git checkout -b my-new-feature</code>)</li>
<li>提交您的改动 (<code>git commit -am 'Added some feature'</code>)</li>
<li>将您的修改记录提交到远程 <code>git</code> 仓库 (<code>git push origin my-new-feature</code>)</li>
<li>然后到 github 网站的该 <code>git</code> 远程仓库的 <code>my-new-feature</code> 分支下发起 Pull Request</li>
</ol>

<p><a name="license"></a></p>

<h2>8. 许可证</h2>

<p>Copyright &copy; 2013 qiniu.com</p>

<p>基于 MIT 协议发布:</p>

<ul>
<li><a href="http://www.opensource.org/licenses/MIT">www.opensource.org/licenses/MIT</a></li>
</ul>

				</article>
			</div>

			<div id="js-sidebar" class="sidebar-shell">
				<div class="js-toggle-list sidebar-module expandable">
					<ul>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">新手上路</span></h3>
						<ul class="js-guides">
							<li><a href="/guide/testing.html">测试指南</a></li>
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">API</span></h3>
						<ul class="js-guides">
							<li><a href="/api/put.html">上传</a></li>
							<li><a href="/api/get.html">下载</a></li>
							<li><a href="/api/file-handle.html">文件管理</a></li>
							<li><a href="/api/image-process.html">图像处理</a></li>
							<li><a href="/api/audio-video-hls-process.html">音频/视频/流媒体处理</a></li>
							<li><a href="/api/qrcode.html">生成二维码 - QR code</a></li>
							<li><a href="/api/markdown-convert.html">Markdown 转 HTML</a></li>
							<li><a href="/api/pipeline.html">Pipeline API</a></li>
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">SDK</span></h3>
						<ul class="js-guides">
							<li><a href="/ios-sdk/index.html">Objective-C (iOS)</a></li>
							<li><a href="/android-sdk/index.html">Java (Android)</a></li>
							<li><a href="/java-sdk/index.html">Java</a></li>
							<li><a href="/php-sdk/index.html">PHP</a></li>
							<li><a href="/python-sdk/index.html">Python</a></li>
							<li><a href="/ruby-sdk/index.html">Ruby</a></li>
							<li><a href="/nodejs-sdk/index.html">Node.js</a></li>
							<li><a href="/csharp-sdk/index.html">C#</a></li>
							<li><a href="/c-sdk/index.html">C/C++</a></li>
							<li><a href="/go-sdk/index.html">Go</a></li>
							<li><a href="/perl-sdk/index.html">Perl</a></li>							
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">上传及开发调试工具</span></h3>
						<ul class="js-guides">
							<li><a href="/tools/qrsync.html">qrsync</a></li>
							<li><a href="/tools/qboxrsctl.html">qboxrsctl</a></li>
							<li><a href="/tools/qiniu-autosync.html">qiniu-autosync</a></li>
						</ul>
						</li>
					</ul>
				</div> <!-- /sidebar-module -->
				<div class="sidebar-module">
					<p>帮助联系: <a href="mailto:support@qiniu.com">support@qiniu.com</a></p>
				</div>
			</div><!-- /sidebar-shell -->

		</div><!-- #wrapper -->

		<div id="footer" >
			<div class="lower_footer">
				<div class="footer_inner clearfix">
					<p>&copy; <span id="year">2012-2013</span> <a href="/">docs.qiniu.com</a>. All rights reserved. Powerd by <a href="http://www.qiniu.com" target="_blank">七牛云存储</a>. <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备11037377号-2</a></p>
				</div><!-- /.site -->
			</div><!-- /.lower_footer -->
		</div><!-- /#footer -->

		<!-- <div class="popover fade top in"><div class="arrow"></div><h3 class="popover-title">Java SDK</h3><div id="popover-content"></div></div> -->
		<script src="/static/js/jquery.js" type="text/javascript"></script>
		<script src="/static/js/qiniudoc.js" type="text/javascript"></script>
		<script src="/static/js/jquery.scrollUp.min.js"></script>
		<script type="text/javascript">
			   //var sdkName = "Java SDK"
				 //$("#popover-content").html($("article ul")[0].outerHTML)
				 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
					})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

					ga('create', 'UA-40857860-3', 'qiniu.com');
					ga('send', 'pageview');
		 </script>
	 </body>
 </html>
