

<!DOCTYPE html>
<html>
	<head>
		<meta name="robots" content="all" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="description" content="七牛云存储API和SDK文档" />
		<meta name="keywords" content="七牛, 七牛云存储, 七牛云存储API, 七牛云存储SDK, qrsync, qboxrsctl, QinuRS, S3" />
		<meta name="author" content="qiniu.com" />
		<meta name="copyright" content="qiniu.com" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Language" content="zh-cn" />
		<meta http-equiv="imagetoolbar" content="false" />
		<meta name="MSSmartTagsPreventParsing" content="true" />
		<title>qiniu-autosync 自动同步工具使用文档 | 七牛云存储</title>
		<link rel="shortcut icon" href="/favicon.ico" type="image/gif" />
		<link href="/static/css/reset.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/960.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/uv_active4d.css" rel="stylesheet" type="text/css" />
		<link href="/static/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
	</head>
	<body class="api">
		<div id="header-wrapper">
			<div id="header">
				<div>
					<a class="logo" href="/">七牛云存储</a>
					<ul class="nav">
						<li><a href="https://portal.qiniu.com">开发者平台</a></li>
						<li><a href="http://www.qiniu.com">七牛官网</a></li>
						<!-- <li><a href="/faq/FAQ.html">FAQ</a></li> -->
					</ul>
				</div>
			</div><!-- #header -->
		</div><!-- #header-wrapper -->

		<div id="wrapper">
			<div class="content">	
				<h1>qiniu-autosync 自动同步工具使用文档<span id="version">v3</span></h1>
				<article>
				<h1>qiniu-autosync</h1>

<p>Sync files to Qiniu Cloud Storage automaticly with inotify-tools</p>

<p>此脚本可监控 Linux/Unix 上指定的文件夹，并将此文件夹内的新增或改动文件自动同步到七牛云存储，可设定同步删除。</p>

<h1>安装</h1>

<ol>
<li>需先安装 inotify-tools - <a href="https://github.com/rvoicilas/inotify-tools/wiki">https://github.com/rvoicilas/inotify-tools/wiki</a></li>
<li>然后下载 qboxrsctl - <a href="http://docs.qiniutek.com/v3/tools/qboxrsctl/">http://docs.qiniutek.com/v3/tools/qboxrsctl/</a></li>
<li>下载脚本 qiniu-autosync.sh</li>
</ol>

<p>Linux 下可以使用如下命令:</p>

<pre><code>$ curl -fsSkL https://raw.github.com/why404/qiniu-autosync/master/qiniu-autosync.sh -o qiniu-autosync.sh

$ chmod +x ./qiniu-autosync.sh
</code></pre>

<h1>使用</h1>

<p>获取七牛云存储 ACCESS_KEY 和 SECRET_KEY 以及 BUCKET_NAME (空间名称) 请登录：<a href="https://dev.qiniutek.com">https://dev.qiniutek.com</a></p>

<p>用法（反斜杠用于排版换行需要，实际情况下可忽略）:</p>

<pre><code>./qiniu-autosync.sh -a /PATH/TO/appkey.json \     # appkey.json 写明 {&quot;access_key&quot;:&quot;YOUR_ACCESS_KEY&quot;, &quot;secret_key&quot;: &quot;YOUR_SECRET_KEY&quot;}
                    -b BUCKET_NAME \              # 用于存储文件的七牛空间名称
                    -c /PATH/TO/qboxrsctl \       # qboxrsctl 可执行命令所在路径
                    -d /PATH/TO/WATCH_DIR \       # 要监控的目录，绝对路径
                    -e ALLOW_DELETE_TrueOrFalse \ # 是否允许自动删除，缺省为 false
                    -f FILE_BLOCK_SIZE \          # 文件切片分块大小，超过这个大小启用并行断点续上传，缺省为 4194304 (4MB)
                    -g INOTIFY_IGNORE_PATTERN     # 忽略列表(正则)，缺省为 &quot;^(.+(\~|\.sw.?)|4913)$&quot; (即 vim 临时文件)
</code></pre>

				</article>
			</div>

			<div id="js-sidebar" class="sidebar-shell">
				<div class="js-toggle-list sidebar-module expandable">
					<ul>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">新手上路</span></h3>
						<ul class="js-guides">
							<li><a href="/guide/testing.html">测试指南</a></li>
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">API</span></h3>
						<ul class="js-guides">
              						<li><a href="/api/v3/auth.html">应用接入与认证授权</a></li>
              						<li><a href="/api/v3/io.html">云存储接口</a></li>
              						<li><a href="/api/v3/foimg.html">云处理之图像处理接口</a></li>
              						<li><a href="/api/v3/avfop.html">云处理之音频/视频处理接口</a></li>
              						<li><a href="/api/v3/words.html">理解常用术语</a></li>
              						<li><a href="/api/v3/code.html">错误码参照表</a></li>
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">SDK</span></h3>
						<ul class="js-guides">
                					<li><a href="/ios-sdk/v3/">iOS</a></li>
                					<li><a href="/android-sdk/v3/">Android</a></li>
                					<li><a href="/c-sdk/v3/">C/C++</a></li>
                					<li><a href="/csharp-sdk/v3/">C#</a></li>
                					<li><a href="/java-sdk/v3/">Java</a></li>
                					<li><a href="/php-sdk/v3/php5-3.html">PHP5.3</a></li>
                					<li><a href="/php-sdk/v3/php5.html">PHP5</a></li>
                					<li><a href="/python-sdk/v3/">Python</a></li>
                					<li><a href="/perl-sdk/v3/">Perl</a></li>
                					<li><a href="/ruby-sdk/v3/">Ruby</a></li>
                					<li><a href="/nodejs-sdk/v3/">NodeJS</a></li>
                					<li><a href="/go-sdk/v3/">Golang</a></li>						
						</ul>
						</li>
						<li class="js-topic">
						<h3><a href="#" class="js-expand-btn expanded">&nbsp;</a><span class="spapi">上传及开发调试工具</span></h3>
						<ul class="js-guides">
                					<li><a href="/tools/v3/qrsync.html">qrsync</a></li>
                					<li><a href="/tools/v3/qboxrsctl.html">qboxrsctl</a></li>
                					<li><a href="/tools/v3/qiniu-autosync.html">qiniu-autosync</a></li>
						</ul>
						</li>
					</ul>
				</div> <!-- /sidebar-module -->
				<div class="sidebar-module">
					<p>帮助联系: <a href="mailto:support@qiniu.com">support@qiniu.com</a></p>
				</div>
			</div><!-- /sidebar-shell -->

		</div><!-- #wrapper -->

		<div id="footer" >
			<div class="lower_footer">
				<div class="footer_inner clearfix">
					<p>&copy; <span id="year">2012-2013</span> <a href="/">docs.qiniu.com</a>. All rights reserved. Powerd by <a href="http://www.qiniu.com" target="_blank">七牛云存储</a>. <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备11037377号-2</a></p>
				</div><!-- /.site -->
			</div><!-- /.lower_footer -->
		</div><!-- /#footer -->

		<!-- <div class="popover fade top in"><div class="arrow"></div><h3 class="popover-title">qiniu-autosync 自动同步工具使用文档</h3><div id="popover-content"></div></div> -->
		<script src="/static/js/jquery.js" type="text/javascript"></script>
		<script src="/static/js/qiniudoc.js" type="text/javascript"></script>
		<script src="/static/js/jquery.scrollUp.min.js"></script>
		<script type="text/javascript">
			   //var sdkName = "qiniu-autosync 自动同步工具使用文档"
				 //$("#popover-content").html($("article ul")[0].outerHTML)
				 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
					})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

					ga('create', 'UA-40857860-3', 'qiniu.com');
					ga('send', 'pageview');
		 </script>
	 </body>
 </html>

